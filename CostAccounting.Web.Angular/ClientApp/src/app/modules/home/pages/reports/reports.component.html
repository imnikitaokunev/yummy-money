<div class="reports container mt-4">
    <div class="d-flex w-100">
        <div class="p-3 m-2 rounded w-50 bg-grey">
            <div class="reports-title fw-bold mb-2">Last 3 monthes</div>
            <ng-container *ngIf="!isYearLoading">
                <div class="d-flex justify-content-between">
                    <div>
                        <div class="reports-subtitle fw-bold">Incomes</div>
                        <div class="reports-amount text-success fw-bold mt-1">+{{ threeMonthsIncomesSum | number:
                            "1.0-0" }}
                        </div>
                        <div class="d-flex">
                            <div class="reports-amount text-success fw-bold mt-1">+{{threeMonthsIncomesSum / 12 |
                                number:
                                "1.0-0"
                                }}</div>
                            <div class="reports-amount fw-bold mt-1">&nbsp;/ mo</div>
                        </div>
                    </div>
                    <div>
                        <div class="reports-subtitle fw-bold">Expenses</div>
                        <div class="reports-amount text-danger fw-bold mt-1">-{{ threeMonthsExpensesSum | number:
                            "1.0-0"}}
                        </div>
                        <div class="d-flex">
                            <div class="reports-amount text-danger fw-bold mt-1">-{{threeMonthsExpensesSum / 12 |
                                number:
                                "1.0-0"
                                }}</div>
                            <div class="reports-amount fw-bold mt-1">&nbsp;/ mo</div>
                        </div>
                    </div>
                    <div>
                        <div class="reports-subtitle fw-bold">Net</div>
                        <div [ngClass]="threeMonthsNetSum == 0 ? '' : (threeMonthsNetSum > 0 ? 'text-success' : 'text-danger')"
                            class="reports-amount fw-bold mt-1">{{threeMonthsNetSum == 0 ? '' : (threeMonthsNetSum > 0 ?
                            '+' : '')}}
                            {{threeMonthsNetSum | number: "1.0-0"}}</div>
                        <div class="d-flex">
                            <div [ngClass]="threeMonthsNetSum == 0 ? '' : (threeMonthsNetSum > 0 ? 'text-success' : 'text-danger')"
                                class="reports-amount fw-bold mt-1">{{threeMonthsNetSum == 0 ? '' : (threeMonthsNetSum >
                                0 ? '+' : '')}} {{threeMonthsNetSum / 12 | number: "1.0-0" }}
                            </div>
                            <div class="reports-amount fw-bold mt-1">&nbsp;/ mo</div>
                        </div>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="isYearLoading">
                <div class="d-flex justify-content-center align-items-center" style="height: 68px;">
                    <app-loading-indicator-sm isLoading="true"></app-loading-indicator-sm>
                </div>
            </ng-container>

        </div>
        <div class="p-3 m-2 rounded w-50 bg-grey">
            <select class="reports-title fw-bold mb-2 not-select" id="year" [(ngModel)]="currentYear"
                (ngModelChange)="onYearChanged($event)">
                <option *ngFor="let year of years" [ngValue]="year">{{ year }}</option>
            </select>

            <ng-container *ngIf="!isYearLoading">
                <div class="d-flex justify-content-between">
                    <div>
                        <div class="reports-subtitle fw-bold">Incomes</div>
                        <div class="reports-amount text-success fw-bold mt-1">+{{ yearIncomesSum | number: "1.0-0" }}
                        </div>
                        <div class="d-flex">
                            <div class="reports-amount text-success fw-bold mt-1">+{{yearIncomesSum / 12 | number:
                                "1.0-0"
                                }}</div>
                            <div class="reports-amount fw-bold mt-1">&nbsp;/ mo</div>
                        </div>
                    </div>
                    <div>
                        <div class="reports-subtitle fw-bold">Expenses</div>
                        <div class="reports-amount text-danger fw-bold mt-1">-{{yearExpensesSum | number: "1.0-0"}}
                        </div>
                        <div class="d-flex">
                            <div class="reports-amount text-danger fw-bold mt-1">-{{yearExpensesSum / 12 | number:
                                "1.0-0"
                                }}</div>
                            <div class="reports-amount fw-bold mt-1">&nbsp;/ mo</div>
                        </div>
                    </div>
                    <div>
                        <div class="reports-subtitle fw-bold">Net</div>
                        <div [ngClass]="yearNetSum == 0 ? '' : (yearNetSum > 0 ? 'text-success' : 'text-danger')"
                            class="reports-amount fw-bold mt-1">{{yearNetSum == 0 ? '' : (yearNetSum > 0 ? '+' : '')}}
                            {{yearNetSum | number: "1.0-0"}}</div>
                        <div class="d-flex">
                            <div [ngClass]="yearNetSum == 0 ? '' : (yearNetSum > 0 ? 'text-success' : 'text-danger')"
                                class="reports-amount fw-bold mt-1">{{yearNetSum == 0 ? '' : (yearNetSum > 0 ? '+' :
                                '')}} {{yearNetSum / 12 | number: "1.0-0" }}
                            </div>
                            <div class="reports-amount fw-bold mt-1">&nbsp;/ mo</div>
                        </div>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="isYearLoading">
                <div class="d-flex justify-content-center align-items-center" style="height: 68px;">
                    <app-loading-indicator-sm isLoading="true"></app-loading-indicator-sm>
                </div>
            </ng-container>

        </div>
    </div>

    <div class="mt-3">
        <div>
            <div style="display: block">
                <canvas baseChart [datasets]="barChartData" [labels]="monthLabels" [options]="barChartOptions"
                    [plugins]="barChartPlugins" [legend]="barChartLegend" [colors]="chartColors"
                    [chartType]="barChartType">
                </canvas>
            </div>
        </div>
    </div>
</div>